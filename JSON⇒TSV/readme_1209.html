<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JSON 階層 TSV 変換ツール - README</title>
<style>
  body { font-family: sans-serif; line-height: 1.7; padding: 20px; color: #333; }
  h1, h2, h3 { margin-top: 1.4em; }
  code, pre { background: #f4f4f4; padding: 4px 6px; border-radius: 4px; }
  pre { padding: 12px; }
  .section { margin-bottom: 2em; }
  .box { background: #fafafa; border-left: 4px solid #4CAF50; padding: 12px 16px; margin: 12px 0; }
</style>
</head>
<body>
<h1>JSON 階層 TSV 変換ツール – README</h1>

<div class="section">
<p>
このツールは、任意の JSON ファイルを解析し、階層構造を縦方向に展開した
<strong>TSV（タブ区切り）形式</strong>へ変換します。<br>
深い階層（1〜N階層）を <strong>level1 → level2 → level3 …</strong> と縦展開し、
<strong>leaf（値）は最下行に 1 行で横方向へ並べる</strong>ことが特徴です。
</p>
</div>

<h2>主な機能</h2>
<div class="section">
<ul>
  <li>JSON の階層構造を縦方向に展開して TSV を生成</li>
  <li>フォルダ内の最新 JSON を自動検出</li>
  <li>出力ファイルはタイムスタンプ付きで保存</li>
  <li>古い TSV は <code>old/</code> フォルダに自動退避</li>
  <li>同一階層で同一 segment が横連続する場合、2 列目以降を「→」に置換</li>
</ul>
</div>

<h2>フォルダ構成</h2>
<pre>
/project-folder
    convert.py                 ← メインスクリプト
    newest.json                ← 任意の JSON（名前自由）
    sample.json
    old/                       ← 出力退避先（自動生成）
</pre>

<h2>使い方</h2>
<div class="section">
<ol>
  <li>JSON ファイルをスクリプトと同じフォルダに置く（ファイル名は自由）</li>
  <li>最新の JSON は更新日時に基づいて自動選択されます</li>
  <li>以下を実行：
    <pre>python convert.py</pre>
  </li>
  <li>出力 TSV が生成され、古い TSV は <code>old/</code> に移動されます</li>
</ol>
</div>

<h2>内部処理フロー</h2>
<div class="section">
<ol>
  <li>JSON を走査し、leaf への <code>key-path</code> を収集</li>
  <li><code>courses[0].conditions[1].update.meta.note</code> のような path を階層単位に分解</li>
  <li>最大階層深度を計算し、必要行数（level1〜N）を生成</li>
  <li>階層情報を縦方向へ整形し TSV 行として配置</li>
  <li>leaf 値は最下行へ 1 行で横展開</li>
  <li>同一階層の同じ segment が連続する場合は、2 列目以降を「→」に置換</li>
  <li>最新 TSV を保存し、過去 TSV は <code>old/</code> へ移動</li>
</ol>
</div>

<h2>拡張ポイント</h2>
<div class="section">
<ul>
  <li>leaf 判定をより賢くする（JSON 構造を自動解析）</li>
  <li>配列番号 <code>[0]</code> を人間向けラベルへ変換</li>
  <li>GUI ランチャー化（Tkinter）</li>
  <li>CLI 引数による JSON ファイル指定</li>
  <li>Excel / Google Sheets 向け最適化（色付けなど）</li>
</ul>
</div>

<h2>サポート</h2>
<p>
仕様追加・改善・バグ修正など、何でも相談してください。<br>
あなたの実務データに最適化し、さらに見やすく仕上げることができます。
</p>

</body>
</html>
