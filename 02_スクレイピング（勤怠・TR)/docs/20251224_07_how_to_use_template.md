# ひな形活用ガイド: 新しい自動化プロジェクトの開始方法

このドキュメントは、既存の汎用的な自動化ツールのひな形 (`00_画面操作自動化` ディレクトリ) を活用して、新しいWebサイトの自動化プロジェクトを効率的に開始するためのガイドです。

## 1. 新しいプロジェクトの準備

### Step 1.1: ひな形ディレクトリのコピー
まず、完成した `00_画面操作自動化` フォルダを、新しいプロジェクト名（例: `01_別サイト自動化`）としてコピーします。

-   **操作**: エクスプローラーやターミナルで、`00_画面操作自動化` ディレクトリを丸ごとコピーし、新しいプロジェクト名（例: `01_別サイト自動化`）に変更します。
-   **例**: `cp -r "00_画面操作自動化" "01_別サイト自動化"` (macOS/Linux) または手動コピー (Windows)

### Step 1.2: 新しいディレクトリでの環境セットアップ
コピーした新しいプロジェクトディレクトリ (`01_別サイト自動化`) に移動し、依存ライブラリを再インストールします。

-   **操作**: コマンドプロンプト/ターミナルで新しいプロジェクトディレクトリへ移動し、以下のコマンドを実行します。
    ```bash
    # 新しいプロジェクトディレクトリへ移動
    cd 01_別サイト自動化 

    # (もし必要なら) 仮想環境の再作成と有効化
    python -m venv venv
    .\venv\Scripts\activate # Windows
    # source venv/bin/activate # macOS/Linux

    # 依存ライブラリの再インストール
    pip install -r requirements.txt
    ```

### Step 1.3: テンプレート設定ファイル (`config/template.yaml`) のコピー
ひな形として用意された `config/template.yaml` を、新しいプロジェクトの設定ファイル `config/config.yaml` としてコピーします。

-   **操作**:
    ```bash
    cp config/template.yaml config/config.yaml
    ```
    その後、`config/config.yaml` をエディタで開いて編集する準備をします。

---

## 2. AI (Gemini) との連携による自動化開発プロセス

新しいプロジェクトディレクトリでAIを起動した後、以下のステップでAIに指示を出し、開発を進めます。

### Step 2.1: 現状の把握とゴールの共有

まず、現在のプロジェクトの状態をAIに認識させ、今回のプロジェクトで何を達成したいかを明確に伝えます。

> **プロンプト**:
> ```
> 現在、`01_別サイト自動化` というディレクトリにいます。このディレクトリには、**PythonのSelenium WebDriverを用いたWeb自動化ツール**のコードが含まれており、`config/config.yaml` を使って設定を管理し、`src/main.py` がエントリーポイントとなっています。
> 今回は **[ターゲットサイト名]** (例: 顧客管理システム) の **[具体的な業務内容]** (例: ログイン後、新規顧客登録フォームに情報を入力する) を自動化したいです。
> まずは `config/config.yaml` を読み込んで、現在の設定項目を把握してください。
> ```
> **補足**: `[ターゲットサイト名]` と `[具体的な業務内容]` はあなたのプロジェクトに合わせて書き換えてください。

### Step 2.2: 設定ファイル (`config/config.yaml`) の修正

AIに `config/config.yaml` の内容を新しいサイトに合わせて修正してもらいます。これが「データドリブン設計」の最も効果的な活用方法です。

> **プロンプト**:
> ```
> 新しいサイトのURLは `https://example.com/login` です。
> ログインフォームの入力項目は以下の通りです。
> - ユーザー名フィールド: HTML属性 `name` が `username_input`
> - パスワードフィールド: HTML属性 `name` が `password_input`
> - ログインボタン: HTML属性 `name` が `login_button`
>
> これに合わせて `config/config.yaml` の `app.url` と `selectors` および `fields.form_field_mappings` セクションを書き換えてください。
> `fields.form_field_mappings` には、`Username` と `Password` を追加し、`type` は両方とも `text` としてください。
> また、`school_specific_defaults` セクションは不要なので削除し、代わりに新しい業務に合わせた入力パターン（例: `login_pattern_admin`）を定義したいです。`common_defaults` も合わせて調整してください。
> ```
> **補足**: `selectors` のキー名（例: `initial_action_button`）や、`fields.form_field_mappings` のフィールド名（例: `Username`）は、**あなたの業務内容に合わせて自由に設定できます**。

### Step 2.3: ロジックの微調整 (必要な場合のみ)

ほとんどの自動化タスクは `config.yaml` の調整だけで対応できますが、特別なブラウザ操作が必要な場合は、コード (`src/*.py`) の修正を依頼します。

> **プロンプト**:
> ```
> サイトの仕様として、ログインボタンを押した後に「利用規約に同意する」というチェックボックス（`name="agree_terms"`）にチェックを入れてから「確定」ボタン（`id="confirm_button"`）をクリックする必要があります。
> `src/form_handler.py` に `fill_form` メソッドの実行後にこれらの処理を追加できますか？
> `browser_utils.py` に `click_element` のような関数を追加する必要があるかもしれません。
> ```
> **補足**: ロジックの修正は、設定ファイルだけでは対応できない「動的な操作」に限定することをお勧めします。

---

## 3. その他の便利なプロンプト集

開発中の様々な場面で活用できる汎用的なプロンプトです。

### 設定ファイルの確認

> **プロンプト**:
> ```
> `config/config.yaml` の内容を表示してください。
> ```

### 特定ファイルのコード確認

> **プロンプト**:
> ```
> `src/form_handler.py` のコードを表示してください。
> ```

### エラー発生時のデバッグ

> **プロンプト**:
> ```
> 発生しているエラーログ (`logs/batch_error_logs/YYYYMMDD_HHmmss.log` の最新のもの) を読み込んで、エラーの原因を特定し、修正案を提案してください。
> ```

### 新しい機能の追加相談

> **プロンプト**:
> ```
> ログイン認証情報（ユーザー名とパスワード）を `config.yaml` に直接書かずに、`.env` ファイルから読み込むようにしたいのですが、どうすれば良いですか？実装案をMDファイルで提示してください。
> ```

---

このガイドが、新しい自動化プロジェクトの成功に役立つことを願っています！
何か不明な点があれば、いつでも質問してください。
